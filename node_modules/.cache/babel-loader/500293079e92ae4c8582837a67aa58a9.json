{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\User\\\\Desktop\\\\practiceUniversity\\\\practiceapp1\\\\src\\\\Articles.js\";\nimport React, { Component } from 'react';\nimport './App.css';\nimport firebase from './firebase.js';\nimport { Link, withRouter } from 'react-router-dom';\nimport Menu from './Menu';\nimport Header from './Header';\nimport '../src/css/AllArticles.css';\nimport Footer from './Footer';\nimport '../src/css/Buttons.css';\n\nclass Articles extends Component {\n  constructor(props) {\n    super(props);\n\n    this.delete = param => e => {\n      firebase.database().ref('posts/' + param).remove();\n      this.componentDidMount();\n      console.log('Delete');\n    };\n\n    this.delete = this.delete.bind(this);\n    this.logout = this.logout.bind(this);\n    this.state = {\n      postinfo: [],\n      uid: ''\n    };\n  }\n\n  componentDidMount() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({\n          uid: user.uid\n        });\n      } else {\n        this.setState({\n          uid: null\n        });\n      }\n    });\n    let newState = [];\n    const db = firebase.database();\n    const postdata = db.ref('posts/');\n    postdata.on('value', snapshot => {\n      let posts = snapshot.val();\n\n      for (let post in posts) {\n        newState.push({\n          id: post,\n          title: posts[post].title,\n          description: posts[post].description,\n          text: posts[post].text,\n          creationdate: posts[post].creationdate,\n          editdate: posts[post].editdate,\n          uid: posts[post].uid\n        });\n      }\n\n      this.setState({\n        postinfo: newState\n      });\n    });\n  }\n\n  logout() {\n    firebase.auth().signOut().then(function () {\n      console.log('Signed Out');\n    }, function (error) {\n      console.error('Sign Out Error', error);\n    });\n    this.props.history.push('/');\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(Menu, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(Header, {\n      title: \"\\u041C\\u043E\\u0438 \\u0441\\u0442\\u0430\\u0442\\u044C\\u0438\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"div\", {\n      class: \"container\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 13\n      }\n    }, this.state.postinfo.map(postinfo => {\n      if (postinfo.uid === this.state.uid) {\n        return /*#__PURE__*/React.createElement(\"div\", {\n          key: postinfo.id,\n          class: \"post\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 21\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: /article/ + postinfo.id,\n          class: \"link\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 23\n          }\n        }, /*#__PURE__*/React.createElement(\"h2\", {\n          class: \"title\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 25\n          }\n        }, postinfo.title), /*#__PURE__*/React.createElement(\"h3\", {\n          class: \"description\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 25\n          }\n        }, postinfo.description)), /*#__PURE__*/React.createElement(\"button\", {\n          class: \"btn green\",\n          type: \"button\",\n          onClick: this.delete(postinfo.id),\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 25\n          }\n        }, \"\\u0423\\u0434\\u0430\\u043B\\u0438\\u0442\\u044C\"), /*#__PURE__*/React.createElement(\"button\", {\n          class: \"btn green\",\n          type: \"button\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 25\n          }\n        }, /*#__PURE__*/React.createElement(Link, {\n          to: /edit/ + postinfo.id,\n          class: \"btnlink\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 93,\n            columnNumber: 65\n          }\n        }, \"\\u0420\\u0435\\u0434\\u0430\\u043A\\u0442\\u0438\\u0440\\u043E\\u0432\\u0430\\u0442\\u044C\")), /*#__PURE__*/React.createElement(\"div\", {\n          class: \"line\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 25\n          }\n        }));\n      }\n    })), /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 15\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      class: \"btn green\",\n      type: \"button\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/addarticle\",\n      class: \"btnlink\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 55\n      }\n    }, \"\\u0414\\u043E\\u0431\\u0430\\u0432\\u0438\\u0442\\u044C \\u043D\\u043E\\u0432\\u0443\\u044E \\u0441\\u0442\\u0430\\u0442\\u044C\\u044E\")), /*#__PURE__*/React.createElement(Footer, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 15\n      }\n    }));\n  }\n\n}\n\nexport default withRouter(Articles);","map":{"version":3,"sources":["C:/Users/User/Desktop/practiceUniversity/practiceapp1/src/Articles.js"],"names":["React","Component","firebase","Link","withRouter","Menu","Header","Footer","Articles","constructor","props","delete","param","e","database","ref","remove","componentDidMount","console","log","bind","logout","state","postinfo","uid","auth","onAuthStateChanged","user","setState","newState","db","postdata","on","snapshot","posts","val","post","push","id","title","description","text","creationdate","editdate","signOut","then","error","history","render","map"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport './App.css';\r\nimport firebase from './firebase.js';\r\nimport {Link, withRouter} from 'react-router-dom';\r\nimport Menu from './Menu';\r\nimport Header from './Header';\r\nimport '../src/css/AllArticles.css';\r\nimport Footer from './Footer';\r\nimport '../src/css/Buttons.css';\r\n\r\nclass Articles extends Component {\r\n  constructor(props) {\r\n      super(props);\r\n      this.delete = this.delete.bind(this);\r\n      this.logout = this.logout.bind(this);\r\n      this.state = {\r\n          postinfo: [],\r\n          uid: '', \r\n      };\r\n      \r\n  };\r\n\r\n  componentDidMount() {\r\n\r\n    firebase.auth().onAuthStateChanged((user) => {\r\n        if(user) {\r\n          this.setState({uid : user.uid}); \r\n        } else {\r\n          this.setState({uid: null});\r\n        }\r\n        });\r\n\r\n        let newState = [];\r\n        const db = firebase.database();\r\n        const postdata = db.ref('posts/');\r\n\r\n        postdata.on('value', (snapshot) =>\r\n        {\r\n            let posts = snapshot.val();\r\n            for(let post in posts)\r\n            {\r\n                newState.push({\r\n                  id: post,\r\n                  title: posts[post].title,\r\n                  description: posts[post].description,\r\n                  text: posts[post].text,\r\n                  creationdate: posts[post].creationdate,\r\n                  editdate: posts[post].editdate,\r\n                  uid: posts[post].uid\r\n                });\r\n            }\r\n            this.setState({\r\n                postinfo: newState\r\n            });\r\n        });\r\n  };\r\n\r\n  delete = param => e => \r\n  {\r\n    firebase.database().ref('posts/' + param).remove();\r\n    this.componentDidMount();\r\n    console.log('Delete');\r\n  }\r\n\r\n  logout() {\r\n    firebase.auth().signOut().then(function() {\r\n      console.log('Signed Out');\r\n    }, function(error) {\r\n      console.error('Sign Out Error', error);\r\n    });\r\n    this.props.history.push('/');\r\n  }\r\n\r\n \r\n  render() {\r\n        return (\r\n          \r\n          <div>\r\n            <Menu />\r\n            <Header title=\"Мои статьи\"/>\r\n            <div class=\"container\">\r\n              {this.state.postinfo.map((postinfo) => {\r\n\r\n                if(postinfo.uid === this.state.uid)\r\n                {\r\n                  return (\r\n                    <div key={postinfo.id} class=\"post\">\r\n                      <Link to={/article/+ postinfo.id} class=\"link\">\r\n                        <h2 class=\"title\">{postinfo.title}</h2>\r\n                        <h3 class=\"description\">{postinfo.description}</h3>\r\n                      </Link>\r\n                        <button class=\"btn green\" type=\"button\" onClick={this.delete(postinfo.id)}>Удалить</button>     \r\n                        <button class=\"btn green\" type=\"button\"><Link to={/edit/+ postinfo.id} class=\"btnlink\" >Редактировать</Link></button>\r\n                        <div class=\"line\"></div>\r\n                    </div>\r\n                );\r\n                }\r\n                  \r\n              })}\r\n              </div>\r\n              <br/>\r\n              <button class=\"btn green\" type=\"button\"><Link to='/addarticle' class=\"btnlink\" >Добавить новую статью</Link></button>\r\n              <Footer />\r\n          </div>\r\n      );  \r\n\r\n      \r\n  }\r\n}\r\n\r\nexport default withRouter(Articles);"]},"metadata":{},"sourceType":"module"}